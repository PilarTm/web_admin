var PLACE_MODEL_MOVE=Backbone.View.extend({template:"#move_place_tpl",initialize:function(e,t){this.model=e,this.callback=t,this.render()},render:function(){var e=_.template($(this.template).html());this.$el=$(e()).modal("show");var t=this;$(this.$el).on("shown.bs.modal",function(){$("#move_place").jstree({core:{data:{url:function(e){return e.id=="#"?"/api/place_jstree_empty/"+t.model.get("id"):"/api/place_jstree_empty/"+t.model.get("id")+"/"+e.id.replace(/place_([0-9]*)_append/,function(e,t){return t})}},themes:{name:"proton",responsive:!0}},checkbox:{three_state:!1},plugins:["checkbox"]}),$("#move_place").bind("changed.jstree",function(e,n){typeof n.event!="undefined"&&n.instance.uncheck_all(),n.action!="deselect_node"?typeof n.node!="undefined"&&(n.instance.select_node(n.node.id),t.model.set("place_id",Number(n.node.id.replace(/place_([0-9]*)_append/,function(e,t){return t}))),$("#moved").attr("class","btn btn-accent")):$("#moved").attr("class","btn btn-default disabled");return})}).on("hidden.bs.modal",function(){$(this).remove(),typeof t.callback!="undefined"&&t.callback()})},events:{"click #moved":function(){var e=this;this.model.save(null,{success:function(){$(e.$el).modal("hide")}})}}});